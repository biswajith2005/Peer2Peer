<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Queries | Campus Skill Exchange</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .site-logo { height: 2.25rem; width: auto; display: block; border-radius: 0.5rem; box-shadow: 0 6px 18px rgba(79,70,229,0.1); padding: 0.2rem; background:#fff; }
    @media (min-width:768px){ .site-logo{ height:2.75rem; } }
  </style>
</head>

<body class="min-h-screen bg-slate-50">

  <!-- NAVBAR -->
  <nav class="flex justify-between items-center px-6 py-4 bg-white shadow-sm">
    <a href="dashboard.html" class="flex items-center gap-3">
      <img src="assets/logo.png" alt="Peer2Peer logo" class="site-logo" />
      <span class="sr-only">Peer2Peer</span>
    </a>
    <div id="navLinks" class="flex items-center gap-3"></div>
  </nav>

  <!-- MAIN -->
  <main class="max-w-6xl mx-auto p-6 space-y-16">

    <!-- ================== 1. POST QUERY ================== -->
    <section class="bg-white rounded-3xl shadow-lg p-8">
      <h2 class="text-2xl font-bold mb-4">‚ùì Post a Query (Anonymous)</h2>

      <input
        id="doubtSubject"
        placeholder="Subject (Java, DBMS, Maths, etc.)"
        class="w-full p-3 border rounded-lg mb-4"
      />

      <div class="flex items-center gap-3 mb-4">
        <input id="doubtAnonymous" type="checkbox" class="h-4 w-4" />
        <label for="doubtAnonymous" class="text-sm text-gray-600">Post anonymously</label>
      </div>

      <textarea
        id="doubtText"
        placeholder="Describe your doubt clearly..."
        class="w-full p-3 border rounded-lg mb-4 h-32"
      ></textarea>

      <button id="postDoubtBtn"
        onclick="postDoubt()"
        class="bg-indigo-600 text-white px-6 py-3 rounded-lg font-semibold"
      >
        Post Query
      </button>
      <p id="doubtAuthHint" class="text-sm text-red-500 mt-2 hidden">Please login to post a query</p>
    </section>

    <!-- ================== 2. RECENT QUERIES (SUBJECT-WISE) ================== -->
    <section>
      <h2 class="text-2xl font-bold mb-6">üóÇ Recent Queries</h2>

      <!-- Subject Filter -->
      <select
        id="subjectFilter"
        onchange="loadDoubts()"
        class="mb-6 p-3 border rounded-lg"
      >
        <option value="all">All Subjects</option>
        <option value="Java">Java</option>
        <option value="DBMS">DBMS</option>
        <option value="DSA">DSA</option>
        <option value="Maths">Maths</option>
      </select>

      <div
  id="doubtsList"
  class="grid gap-6 max-h-[450px] overflow-y-auto pr-2"
></div>

    </section>

    <!-- ================== 3. MY CONTRIBUTIONS ================== -->
    <section>
      <h2 class="text-2xl font-bold mb-6">‚≠ê My Contributions</h2>

      <div
  id="myContributions"
  class="grid gap-4 bg-white p-6 rounded-3xl shadow-lg
         max-h-[300px] overflow-y-auto"
></div>

        <!-- Filled dynamically -->
      </div>
    </section>

  </main>

  <!-- SCRIPT -->
  <script type="module" src="./js/nav.js"></script>
  <script type="module" src="./js/doubts.js"></script>
  <!-- CONTRIBUTION MODAL -->
<div
  id="contributionModal"
  class="fixed inset-0 bg-black bg-opacity-40 hidden items-center justify-center z-50"
>
  <div class="bg-white max-w-xl w-full rounded-2xl p-6 shadow-lg">
    <h3 class="text-xl font-bold mb-2" id="modalQuestion"></h3>
    <p class="text-sm text-gray-500 mb-4" id="modalSubject"></p>

    <div class="bg-slate-50 p-4 rounded-lg mb-4">
      <p class="font-semibold text-indigo-600 mb-1">Your Answer</p>
      <p id="modalAnswer"></p>
    </div>

    <button
      onclick="closeModal()"
      class="bg-indigo-600 text-white px-6 py-2 rounded-lg"
    >
      Close
    </button>
  </div>
</div>
<!-- SUCCESS TOAST -->
<div
  id="toast"
  class="fixed bottom-6 right-6 hidden items-center gap-3
         bg-green-600 text-white px-6 py-4 rounded-xl shadow-lg
         transform translate-y-10 opacity-0 transition-all duration-500 z-50"
>
  <span class="text-xl">‚úÖ</span>
  <p id="toastMessage" class="font-semibold"></p>
</div>

</body>
</html>
